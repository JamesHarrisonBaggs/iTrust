<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:f="http://java.sun.com/jsf/core">
<f:view
	beforePhase="#{navigation_controller.redirectIfInvalidPatient()}" />

<f:metadata>
	<f:event type="preRenderView"
		listener="#{obgyn_controller.logViewPIR()}" />
</f:metadata>
<head>
</head>
<h:body>
	<ui:composition template="/iTrust_template.xhtml">
		<ui:define name="pageStyle"></ui:define>
		<ui:define name="pageTitle">iTrust - View Obstetrics Initilizations</ui:define>
		<ui:define name="leftMenu">
			<ui:include src="/auth/hcp/menu.xhtml" />
		</ui:define>
		<ui:define name="mainContent">
			<div class="form-group" style="width: 500px">
				<h2>Patient Obstetric Initialization</h2>
				<h4>of #{user.getUserNameForID(session.getAttribute("pid"))}</h4>
				<h:outputText style="color: green"
					rendered="#{obgyn_controller.eligible}"
					value="who is
					eligible for Obstetric Care" width="50%"></h:outputText>
				<h:outputText style="color: red"
					rendered="#{!obgyn_controller.eligible}"
					value="who is
					ineligible for Obstetric Care" width="50%"></h:outputText>

			</div>
			<br />
			<h:dataTable id="PIRTable" class="fTable" width="50%"
				value="#{obgyn_controller.obstetricsList}" var="obsInitBean" border="1">
				<h:column>
					<f:facet name="header">
								<h:outputText value="Date"/>
					</f:facet>
					<h:link outcome="viewSingleObstetricsInit"
						value="#{obsInitBean.initDate}">
						<f:param name="viewDate" value="#{obsInitBean.initDate}" />
					</h:link>

				</h:column>
				<h:column>
					<f:facet name="header">Status</f:facet>
								<h:outputText rendered="#{obsInitBean.current}" value="Active"/>
								<h:outputText rendered="#{!obsInitBean.current}" value="Inactive"/>
							</h:column>
			</h:dataTable>
			<br />
			<h:form>
				<h:panelGrid class="fTable" width="50%" columns="2">
					<h:panelGroup rendered="false">
						<h:selectOneMenu value="#{obgyn_controller.viewDate}" width="50%">
							<f:selectItems value="#{obgyn_controller.obstetricsList}"
								var="obsInitBean" itemValue="#{obsInitBean.initDate}" itemLabel="#{obsInitBean.initDate}"/>
						</h:selectOneMenu>
						<br />
						<h:commandButton id="viewPatientInitRecord"
							style="font-size:11px; font-weight:bold"
							value="View Patient Initialization Record" action="#{obgyn_controller.submitViewDate}"/>
					</h:panelGroup>
					<h:panelGroup rendered="#{!obgyn_controller.eligible}">
						<h:commandButton id="setPatientEligible"
							style="font-size:11px; font-weight:bold" align="left"
							value="Set Patient as eligible" width="50%"
							action="#{obgyn_controller.submitEligible}" />
					</h:panelGroup>
					<h:panelGroup rendered="#{obgyn_controller.eligible}">
						<h:commandButton id="setPatientIneligible"
							style="font-size:11px; font-weight:bold" align="left"
							value="Set Patient as Ineligible" width="50%"
							action="#{obgyn_controller.submitNotEligible}" />
					</h:panelGroup>
					<h:panelGroup rendered="#{obgyn_controller.bothObGynEligible}">
						<h:commandButton id="createPatientInitRecord"
							style="font-size:11px; font-weight:bold" align="left"
							value="Create New Initialization Record"
							action="#{obgyn_controller.submitCreate}" />
					</h:panelGroup>
				</h:panelGrid>
			</h:form>
		</ui:define>
	</ui:composition>
</h:body>
</html>